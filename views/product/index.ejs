<% layout('/layouts/boilerplate') %>
    <link rel="stylesheet" href="/stylesheet/indexproduct.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
<style>
#canvas{
width: 100%;
height: 90%;
position: absolute;
left: 0;
top: 27%;

}

</style>
    <section class="mt-5 product-section">
        <%- include('../partials/_cart') %>
            <!-- main content -->
<canvas id="canvas"></canvas>
            <div class="container mt-4">

                <ul class="nav nav-tabs d-flex justify-content-center align-items-center mt-3" id="myTab"
                    role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="hot-coffee-tab" data-bs-toggle="tab"
                            data-bs-target="#hot-coffee" type="button" role="tab" aria-controls="hot-coffee"
                            aria-selected="true">Hot
                            Coffee</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="iced-coffee-tab" data-bs-toggle="tab" data-bs-target="#iced-coffee"
                            type="button" role="tab" aria-controls="iced-coffee" aria-selected="false">Iced
                            Coffee</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="frappe-tab" data-bs-toggle="tab" data-bs-target="#frappe"
                            type="button" role="tab" aria-controls="frappe" aria-selected="false">Frappe</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="smoothie-tab" data-bs-toggle="tab" data-bs-target="#smoothie"
                            type="button" role="tab" aria-controls="smoothie" aria-selected="false">Smoothie</button>
                    </li>

                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pastries-tab" data-bs-toggle="tab" data-bs-target="#pastries"
                            type="button" role="tab" aria-controls="pastries" aria-selected="false">Pastries</button>
                    </li>
                </ul>

                <div class="tab-content" id="myTabContent">

                    <div class="tab-pane fade show active" id="hot-coffee" role="tabpanel"
                        aria-labelledby="hot-coffee-tab">
                        <div class="container-fluid mt-5">
                            <div class="row d-flex flex-wrap justify-content-center" id="product-list">
                                <% for(let product of products){ %>
                                    <% if(product.category.includes("Hot Coffee")){ %>
                                        <div class="col-lg-3 mb-4">

                                            <div class="card bg-transparent">
                                                <div class="card2">
                                                    <div class="content">

                                                        <div class="back">
                                                            <div class="back-content">
      <% if(product.images.length){ %>
                                                                <img src="<%= product.images[0].url %>"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% }else{ %>
                                                                     <img src="https://images.unsplash.com/photo-1547583881-58685cb3210f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8aG90JTIwY29mZmVlfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% } %>
                                                            </div>
                                                        </div>
                                                        <div class="front">

                                                            <div class="img">
                                                                <div class="circle">
                                                                </div>
                                                                <div class="circle" id="right">
                                                                </div>
                                                                <div class="circle" id="bottom">
                                                                </div>
                                                            </div>

                                                            <div class="front-content">
                                                                <small class="badge">
                                                                    <%= product.category %>
                                                                </small>
                                                                <div class="description">
                                                                    <div class="title">
                                                                        <h5 class="prod-title">
                                                                            <a href="/products/<%=product._id %>">
                                                                                <%= product.title %>
                                                                            </a>
                                                                        </h5>

                                                                        <div class="d-flex flex-column mb-2">
                                                                            <span class="new-price">$<%= product.price
                                                                                    %>
                                                                            </span>

                                                                        </div>
                                                                    </div>
                                                                    <p class="card-footer">
                                                                        <%= product.description.length> 80 ?
                                                                            product.description.slice(0, 80) +
                                                                            "..." :
                                                                            product.description %>
                                                                            <form
                                                                                action="/products/<%=product._id %>/cart"
                                                                                method="POST"
                                                                                class="add-cart text-center">
                                                                                <button class="add-to-cart-button"
                                                                                    data-product-id="<%= product._id %>">Add
                                                                                    to
                                                                                    Cart</button>
                                                                            </form>
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <% } %>
                                            <% } %>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="iced-coffee" role="tabpanel" aria-labelledby="iced-coffee-tab">
                        <div class="container-fluid mt-5 ">
                            <div class="row d-flex flex-wrap justify-content-center" id="product-list">
                                <% for(let product of products){ %>
                                    <% if(product.category.includes("Iced Coffee")){ %>
                                        <div class="col-lg-3 mb-4">

                                            <div class="card">
                                                <div class="card2">
                                                    <div class="content">
                                                        <div class="back">
                                                            <div class="back-content">
      <% if(product.images.length){ %>
                                                                <img src="<%= product.images[0].url %>"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% }else{ %>
                                                                     <img src="https://images.unsplash.com/photo-1517701550927-30cf4ba1dba5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8aWNlZCUyMGNvZmZlZXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% } %>
                                                            </div>
                                                        </div>
                                                        <div class="front">

                                                            <div class="img">
                                                                <div class="circle">
                                                                </div>
                                                                <div class="circle" id="right">
                                                                </div>
                                                                <div class="circle" id="bottom">
                                                                </div>
                                                            </div>

                                                            <div class="front-content">
                                                                <small class="badge">
                                                                    <%= product.category %>
                                                                </small>
                                                                <div class="description">
                                                                    <div class="title">
                                                                        <h5 class="prod-title">
                                                                            <a href="/products/<%=product._id %>">
                                                                                <%= product.title %>
                                                                            </a>
                                                                        </h5>
                                                                        <div class="d-flex flex-column mb-2">
                                                                            <span class="new-price">$<%= product.price
                                                                                    %>
                                                                            </span>

                                                                        </div>
                                                                    </div>
                                                                    <p class="card-footer">
                                                                        <%= product.description.length> 80 ?
                                                                            product.description.slice(0, 80) +
                                                                            "..." :
                                                                            product.description %>
                                                                            <form
                                                                                action="/products/<%=product._id %>/cart"
                                                                                method="POST"
                                                                                class="add-cart text-center">
                                                                                <button class="add-to-cart-button"
                                                                                    data-product-id="<%= product._id %>">Add
                                                                                    to
                                                                                    Cart</button>
                                                                            </form>
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <% } %>
                                            <% } %>
                            </div>
                        </div>

                    </div>
                    <div class="tab-pane fade" id="frappe" role="tabpanel" aria-labelledby="frappe-tab">
                        <div class="container-fluid mt-5 ">
                            <div class="row d-flex flex-wrap justify-content-center" id="product-list">
                                <% for(let product of products){ %>
                                    <% if(product.category.includes("frappe")){ %>
                                        <div class="col-lg-3 mb-4">

                                            <div class="card">
                                                <div class="card2">
                                                    <div class="content">
                                                        <div class="back">
                                                            <div class="back-content">

                                                                      <% if(product.images.length){ %>
                                                                <img src="<%= product.images[0].url %>"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% }else{ %>
                                                                     <img src="https://media.istockphoto.com/id/1444036182/photo/milk-chocolate-oreos.jpg?s=612x612&w=0&k=20&c=6GCYvW-iEFwWSDhSqfEMX2YsNUc7v2lyd78XqrYUl4U="
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% } %>
                                                            </div>
                                                        </div>
                                                        <div class="front">

                                                            <div class="img">
                                                                <div class="circle">
                                                                </div>
                                                                <div class="circle" id="right">
                                                                </div>
                                                                <div class="circle" id="bottom">
                                                                </div>
                                                            </div>

                                                            <div class="front-content">
                                                                <small class="badge">
                                                                    <%= product.category %>
                                                                </small>
                                                                <div class="description">
                                                                    <div class="title">
                                                                        <h5 class="prod-title">
                                                                            <a href="/products/<%=product._id %>">
                                                                                <%= product.title %>
                                                                            </a>
                                                                        </h5>
                                                                        <div class="d-flex flex-column mb-2">
                                                                            <span class="new-price">$<%= product.price
                                                                                    %>
                                                                            </span>

                                                                        </div>
                                                                    </div>
                                                                    <p class="card-footer">
                                                                        <%= product.description.length> 80 ?
                                                                            product.description.slice(0, 80) +
                                                                            "..." :
                                                                            product.description %>
                                                                            <form
                                                                                action="/products/<%=product._id %>/cart"
                                                                                method="POST"
                                                                                class="add-cart text-center">
                                                                                <button class="add-to-cart-button"
                                                                                    data-product-id="<%= product._id %>">Add
                                                                                    to
                                                                                    Cart</button>
                                                                            </form>
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <% } %>
                                            <% } %>
                            </div>
                        </div>

                    </div>
                    <div class="tab-pane fade" id="smoothie" role="tabpanel" aria-labelledby="smoothie-tab">
                        <div class="container-fluid mt-5 ">
                            <div class="row d-flex flex-wrap justify-content-center" id="product-list">
                                <% for(let product of products){ %>
                                    <% if(product.category.includes("smoothie")){ %>
                                        <div class="col-lg-3 mb-4">

                                            <div class="card">
                                                <div class="card2">
                                                    <div class="content">
                                                        <div class="back">
                                                            <div class="back-content">

                                                                     <% if(product.images.length){ %>
                                                                <img src="<%= product.images[0].url %>"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% }else{ %>
                                                                     <img src="https://images.unsplash.com/photo-1505252585461-04db1eb84625?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8c21vb3RoaWVzfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% } %>

                                                            </div>
                                                        </div>
                                                        <div class="front">

                                                            <div class="img">
                                                                <div class="circle">
                                                                </div>
                                                                <div class="circle" id="right">
                                                                </div>
                                                                <div class="circle" id="bottom">
                                                                </div>
                                                            </div>

                                                            <div class="front-content">
                                                                <small class="badge">
                                                                    <%= product.category %>
                                                                </small>
                                                                <div class="description">
                                                                    <div class="title">
                                                                        <h5 class="prod-title">
                                                                            <a href="/products/<%=product._id %>">
                                                                                <%= product.title %>
                                                                            </a>
                                                                        </h5>
                                                                        <div class="d-flex flex-column mb-2">
                                                                            <span class="new-price">$<%= product.price
                                                                                    %>
                                                                            </span>

                                                                        </div>
                                                                    </div>
                                                                    <p class="card-footer">
                                                                        <%= product.description.length> 80 ?
                                                                            product.description.slice(0, 80) +
                                                                            "..." :
                                                                            product.description %>
                                                                            <form
                                                                                action="/products/<%=product._id %>/cart"
                                                                                method="POST"
                                                                                class="add-cart text-center">
                                                                                <button class="add-to-cart-button"
                                                                                    data-product-id="<%= product._id %>">Add
                                                                                    to
                                                                                    Cart</button>
                                                                            </form>
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <% } %>
                                            <% } %>
                            </div>
                        </div>

                    </div>
                    <div class="tab-pane fade" id="pastries" role="tabpanel" aria-labelledby="pastries-tab">
                        <div class="container-fluid mt-5 ">
                            <div class="row d-flex flex-wrap justify-content-center" id="product-list">
                                <% for(let product of products){ %>
                                    <% if(product.category.includes("Pastries")){ %>
                                        <div class="col-lg-3 mb-4">
                                            <div class="card">
                                                <div class="card2">
                                                    <div class="content">
                                                        <div class="back">
                                                            <div class="back-content">
                                                                     <% if(product.images.length){ %>
                                                                <img src="<%= product.images[0].url %>"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% }else{ %>
                                                                     <img src="https://images.unsplash.com/photo-1534432182912-63863115e106?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGFzdHJpZXN8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60"
                                                                    class="img-fluid rounded thumbnail-image"
                                                                    style="width: 100%;height: 300px;">
                                                                    <% } %>
                                                            </div>
                                                        </div>
                                                        <div class="front">
                                                            <div class="img">
                                                                <div class="circle"></div>
                                                                <div class="circle" id="right"></div>
                                                                <div class="circle" id="bottom"></div>
                                                            </div>
                                                            <div class="front-content">
                                                                <small class="badge">
                                                                    <%= product.category %>
                                                                </small>
                                                                <div class="description">
                                                                    <div class="title">
                                                                        <h5 class="prod-title">
                                                                            <a href="/products/<%=product._id %>">
                                                                                <%= product.title %>
                                                                            </a>
                                                                        </h5>
                                                                        <div class="d-flex flex-column mb-2">
                                                                            <span class="new-price">$<%= product.price
                                                                                    %></span>

                                                                        </div>
                                                                    </div>
                                                                    <p class="card-footer">
                                                                        <%= product.description.length> 80 ?
                                                                            product.description.slice(0, 80) + "..." :
                                                                            product.description %>
                                                                    </p>
                                                                    <form action="/products/<%=product._id %>/cart"
                                                                        method="POST" class="add-cart text-center">
                                                                        <button class="add-to-cart-button"
                                                                            data-product-id="<%= product._id %>">Add to
                                                                            Cart</button>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <% } %>
                                            <% } %>
                            </div>
                        </div>
                    </div>
</div>
</div>
    </section>
<script>
const projectSection = document.querySelector('.container');

const projectAnim = gsap.timeline({
    scrollTrigger: {
        trigger: projectSection,
        toggleActions: "restart pause resume reset",
        start: 'top bottom',
        end: 'bottom top',
    }
});

projectAnim.from(".card", {
    duration: 1,
    scale: 0.5,
    opacity: 0,
    delay: 0.5,
    stagger: 0.2,
    ease: "elastic",
    force3D: true
});


</script>

<script>
const canvas = document.getElementById('canvas')
const ctx = canvas. getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let spots = [];
 let hue = 0;

const mouse = {
x:undefined,
y:undefined,
}
canvas.addEventListener('mousemove', function(event){
mouse.x = event.x;
mouse.y = event.y;
for(let i = 0; i<3;i++){
spots.push(new Particles());
}

})

class Particles{
constructor(){
this.x = mouse.x;
this.y = mouse.y -150;
this.size = Math.random() * 2 + 0.1;
this.speedX = Math.random() * 2 - 1;
this.speedY = Math.random() * 2 - 1;
this.color = 'hsl(' + hue +', 100%, 50%)';
}
update(){
this.x += this.speedX
this.y += this.speedY
if(this.size > 0.1) this.size -= 0.03;
}
draw(){
ctx.fillStyle = this.color;
ctx.beginPath();
ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
ctx.fill();

}
}
function handleParticle(){
for (let i = 0; i < spots.length; i++){
spots[i].update();
spots[i].draw();
for(let j = i; j < spots.length; j++){
const dx = spots[i].x - spots[j].x;
const dy = spots[i].y - spots[j].y;
const distance = Math.sqrt(dx * dx * dy * dy);
if (distance < 90){
ctx.beginPath();
ctx.strokeStyles = spots[i].color;
ctx.lineWidth = spots[i].size/10;
ctx.moveTo(spots[i].x, spots[i].y);
ctx.lineTo(spots[i].x, spots[i].y);
ctx.stroke()
}
}
if (spots[i].size <= 0.3){
spots.splice(i, 1); i--;
}
}
}
function animate(){
ctx.clearRect(0, 0, canvas.width, canvas.height);
handleParticle();
hue++;
requestAnimationFrame(animate);
}
window.addEventListener('resize', function(){
canvas.width = innerWidth;
canvas.height = innerHeight;
init()
})

window.addEventListener('moutseout', function(){
mouse.x= undefined;
mouse.y= undefined;
})

animate()

</script>