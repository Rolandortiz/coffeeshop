
<!DOCTYPE html>
<html>
<head>
  <title>Calendar</title>
  <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="/stylesheet/user-dash.css">
    <link rel="stylesheet" href="/stylesheet/calendar.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">


</head>
<body>
   <%- include('../partials/sidebar') %>
 <div class="container-md dash-content mb-5">
<%- include('../partials/flash') %>
    <div class="container">
      <h1 class="text-center text-capitalize">Calendar</h1>

      <ul class="nav nav-tabs">

  <li class="nav-item">
   <a class="nav-link <%= isMonthActive ? 'active' : '' %>" id="month-tab" data-bs-toggle="tab" href="#month" role="tab" aria-controls="month" aria-selected="<%= isMonthActive %>">Month</a>
  </li>
  <li class="nav-item">
    <a class="nav-link <%= isWeekActive ? 'active' : '' %>" id="week-tab" data-bs-toggle="tab" href="#week" role="tab" aria-controls="week" aria-selected="<%= isWeekActive %>">Week</a>
  </li>
<li class="nav-item ms-auto" style="margin-right: 4rem;">
<button class="nav-link" data-bs-toggle="modal" data-bs-target="#schedule" data-bs-whatever="@getbootstrap">Create new Schedule</button>
</li>
</ul>
      <div class="tab-content">
          <div class="tab-pane fade <%= isMonthActive ? 'show active' : '' %>" id="month" role="tabpanel" aria-labelledby="month-tab">
          <div class="row">
            <div class="month-name col-3">
              <h2><%= monthName %> <%= year %></h2>
            </div>
          </div>
          <table class="calendar">
      <thead>
        <tr>
          <th>Sun</th>
          <th>Mon</th>
          <th>Tue</th>
          <th>Wed</th>
          <th>Thu</th>
          <th>Fri</th>
          <th>Sat</th>
        </tr>
      </thead>
      <tbody>
        <% for (let week of calendar) { %>
          <tr>
            <% for (let day of week) { %>
              <td class="<%= day.isCurrentMonth ? 'current-month' : '' %> <%= day.isToday ? 'today' : '' %>" data-bs-toggle="modal" data-bs-target="#schedule" data-bs-whatever="@getbootstrap"><%= day.day%></td>
            <% } %>
            </tr>

        <% } %>
      </tbody>
    </table>
<div class="pagination col-3 ms-auto">
      <% if (month > 1) { %>
        <a href="/calendar?month=<%= month - 1 %>"><span class="material-symbols-outlined left">
arrow_back_ios
</span></a>
      <% } %>
      <% if (month < 12) { %>
        <a href="/calendar?month=<%= month + 1 %>"><span class="material-symbols-outlined right">
arrow_forward_ios
</span></a>
      <% } %>
    </div>
        </div>
       <div class="tab-pane week fade <%= isWeekActive ? 'show active' : '' %>" id="week" role="tabpanel" aria-labelledby="week-tab">
  <table class="calendar">
    <thead>

      <tr data-bs-toggle="modal" data-bs-target="#schedule" data-bs-whatever="@getbootstrap">
 <th>Sun</th>
        <th>Mon</th>
        <th>Tue</th>
        <th>Wed</th>
        <th>Thu</th>
        <th>Fri</th>
        <th>Sat</th>


      </tr>
    </thead>
 <tbody>
  <% for (let week of weeks) { %>
    <tr>
      <% for (let day of week) { %>
        <td class="align-top <%= day.isCurrentMonth ? 'current-month' : '' %> <%= day.isToday ? 'todayWeek' : '' %>">
          <div class="weekdays"><%= day.day %></div>

          <% for (let schedule of schedules) { %>
            <% if (schedule.date.getDate() === day.day && schedule.date.getMonth() === (month - 1) && schedule.date.getFullYear() === year) { %>


<div class="form-check mb-3 me-3">
  <div class="row d-flex justify-content-between align-items-center">
    <div class="col-md-1">
  <input class="checkbox" type="checkbox" checked="" value="" data-schedule-id="<%= schedule._id %>">
</div>

    <div class="col-6 form-check-label" for="flexCheckChecked">

        <h6 class="form-check-inline w-50"><%= schedule.title %></h6>

    </div>
    <div class="col-md-1 text-end me-3 del">
      <form class="delete-form" data-schedule-id="<%= schedule._id %>">
        <button class="btn-sm delete-schedule" style="background: none;"><i class="fas fa-times"></i></button>
      </form>
    </div>

  <small class="text-center form-check-inline"><%= schedule.time %></small>
  <small class="text-muted form-check-inline"><%= schedule.description %></small>
</div>
</div>

            <% } %>
          <% } %>

        </td>
      <% } %>
    </tr>
  <% } %>
</tbody>
  </table>

</div>
    </div>
  </div>


<div class="modal fade" id="schedule" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New Product</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/schedule" method="POST" class="validated-form needs-validation" novalidate>
         <div class="input-group mb-3">
  <input type="text" class="form-control" name="schedule[title]" placeholder="title" aria-label="title" aria-describedby="basic-addon1" required>
<div class="valid-feedback">
      Looks good!
    </div>
 <div class="invalid-feedback">
      Please provide a title.
    </div>
</div>
<div  class="bt-form bt-outline w-50 datepicker" inline="true" >
  <input id="datepicker" placeholder="Select date" type="text"  class="form-control" name="schedule[date]" required>
<i class="fas fa-calendar input-prefix"></i>
</div>

<div class="input-group mt-3 w-50">
  <input type="time" name="schedule[time]" class="form-control" />
</div>

<div class="input-group mt-3">
  <span class="input-group-text">Description</span>
  <textarea name="schedule[description]" class="form-control" aria-label="With textarea" required></textarea>
<div class="valid-feedback">
      Looks good!
    </div>
 <div class="invalid-feedback">
      Please provide a description.
    </div>
</div>

<div class="input-group mt-3">
  <span class="input-group-text">Reminders</span>
  <textarea name="schedule[reminders]" class="form-control" aria-label="With textarea" required></textarea>
<div class="valid-feedback">
      Looks good!
    </div>
 <div class="invalid-feedback">
      Please provide a description.
    </div>
</div>
<button type="submit" class="mt-5 btn btn-secondary">Add new schedule</button>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

      </div>
    </div>
  </div>
</div>



 <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>
<script src="/javascript/calendar.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>


</body>
</html>
